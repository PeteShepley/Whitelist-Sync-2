plugins {
    id 'com.github.johnrengelman.shadow' version '7.1.2'
    id 'java'
    id 'maven-publish'
}

apply plugin: 'eclipse'

eclipse {
    project {
        name = "WhitelistSync"
    }
}

allprojects {
    repositories {
        mavenLocal()
        maven { url 'https://libraries.minecraft.net/' }
        maven { url "https://cursemaven.com" }
    }

    apply plugin: 'java'

    group = mod_group_id
    version = mod_version
}

class Globals {
    String buildNumber = System.getenv().BUILD_NUMBER ?: "Dev"
}

ext {
    globals = new Globals()
}

subprojects {
    apply plugin: "com.github.johnrengelman.shadow"
    apply plugin: 'java'
    apply plugin: 'maven-publish'

    sourceCompatibility = 1.8
    targetCompatibility = 1.8
    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }
}

clean {
    delete "target"
}

task setupCIWorkspace {
}